<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banco de Quest√µes e Simulados - ENEM</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
    /* ------------------------------------------------ */
    /* CORES BASE ORIGINAIS (MANTIDAS) */
    /* ------------------------------------------------ */
    :root {
        /* Cores Padr√£o do Tema Claro */
        --azul-principal: #3A6D89;
        --cinza-claro: #EEF2F5; /* Fundo Secund√°rio */
        --cinza-medio: #D9E0E5; /* Cinza para Bordas e Fundo da Aba */
        --cinza-texto: #4B5563; /* Cor comum de texto para melhor contraste */
        --verde-progresso: #4CB452; 

        /* Novas Vari√°veis da Sidebar, usando cores existentes */
        --bg-sidebar: #FFFFFF;
        --sidebar-text: var(--cinza-texto);
        --sidebar-active-bg: var(--azul-principal);
        --sidebar-active-text: #FFFFFF;
        --sidebar-border: #E2E8F0;

        /* VARI√ÅVEIS DO NOVO SIDEBAR - MODO ESCURO (Tons mais escuros, se n√£o houver 'dark') */
        --bg-sidebar-nav: #1f2937;
        --bg-card-hover: #374151;
        --bg-active-nav: #4a5568;
        --border-color-nav: #4b5563;
        --text-primary-nav: #f0f0f0;
        --text-secondary-nav: #9ca3af;
        --accent-blue-nav: #3b82f6;
    }

    /* ------------------------------------------------ */
    /* MODO CLARO DO SIDEBAR (INTEGRA√á√ÉO DE CORES) */
    /* ------------------------------------------------ */
    body:not(.dark) {
        --bg-sidebar-nav: #c6d4e1;
        --bg-card-hover: #d1d5db;
        --bg-active-nav: #a1aec1;
        --border-color-nav: #9ca3af;
        --text-primary-nav: #1f2937;
        --text-secondary-nav: #4b5563;
        --accent-blue-nav: #1e3a8a;
    }

    /* ------------------------------------------------ */
    /* MODO ESCURO (NOVA TONALIDADE DA FOTO) */
    /* ------------------------------------------------ */
    body.dark {
        /* Cores baseadas na tonalidade azul-acinzentada escura da foto: #1D2B3C */
        
        --cinza-claro: #1D2B3C; /* Fundo Geral Principal (Tom mais escuro da foto) */
        --bg-sidebar: #2C3E50; /* Fundo da Sidebar, Cards e Abas (Tom ligeiramente mais claro para contraste) */
        --cinza-medio: #4B607A; /* Fundo Secund√°rio (bordas, separadores, sliders) */
        
        /* Texto e Acentos */
        --cinza-texto: #E0E0E0; /* Texto Claro */
        --sidebar-text: #E0E0E0;
        --azul-principal: #74A7E0; /* Azul principal mais sutil (destaque) */
        --sidebar-active-text: #1D2B3C; /* Texto escuro no bot√£o azul */
        --sidebar-border: #4B607A; /* Borda mais escura */
        --verde-progresso: #81C784; /* Verde mais claro */
        
        /* VARI√ÅVEIS DO NOVO SIDEBAR - MODO ESCURO (Ajustadas para a nova paleta) */
        --bg-sidebar-nav: var(--bg-sidebar);
        --bg-card-hover: #3D536B; /* Um pouco mais claro que o sidebar para o hover */
        --bg-active-nav: #4B607A;
        --border-color-nav: #6B7C93;
        --text-primary-nav: #F0F0F0;
        --text-secondary-nav: #B0BEC5;
        --accent-blue-nav: var(--azul-principal); /* Usa a nova cor de destaque */
    }

    /* Estilos espec√≠ficos para o Dark Mode (Ajustados) */
    
    body.dark .nav-tabs {
        background-color: var(--cinza-medio); 
    }

    body.dark .nav-tab[data-target="questoes"].active,
    body.dark .nav-tab[data-target="simulados"].active {
        background-color: var(--bg-sidebar); 
        color: var(--azul-principal); 
        box-shadow: none; 
    }

    body.dark .filters-section,
    body.dark .question-body,
    body.dark .simulado-card {
        background-color: var(--bg-sidebar);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4); /* Sombra mais vis√≠vel no escuro */
    }
    
    body.dark .slider {
        background-color: var(--cinza-medio); 
    }
    body.dark input:checked + .slider {
        background-color: var(--accent-blue-nav);
    }
    body.dark .slider:before {
        background-color: #E0E0E0;
    }

    body.dark .answer-option { 
        border: 2px solid var(--cinza-medio); 
    }
    body.dark .answer-option:hover { 
        border-color: var(--azul-principal); 
    }
    
    body.dark .btn-secondary { 
        background-color: transparent; /* Fundo transparente ou muito sutil */
        color: var(--azul-principal); 
        border: 1px solid var(--azul-principal); 
    } 
    body.dark .btn-secondary:hover { 
        background-color: var(--cinza-medio); 
    }
    body.dark .btn-locked { 
        background-color: var(--cinza-medio); 
    }

    /* Estilos Globais e Reset B√°sico */
    body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        background-color: var(--cinza-claro); /* Fundo Geral */
        margin: 0;
        min-height: 100vh;
    }

    /* ------------------------------------------------ */
    /* SIDEBAR (NOVO BLOCO) */
    /* ------------------------------------------------ */
    .sidebar {
        width: 250px;
        height: 100vh;
        background: var(--bg-sidebar-nav);
        color: var(--text-primary-nav);
        padding: 20px 0;
        position: fixed;
        left: 0;
        top: 0;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        box-shadow: 4px 0 8px rgba(0,0,0,0.15);
        z-index: 1000; /* Garante que fique acima do main content */
    }
    body.dark .sidebar {
         box-shadow: 4px 0 8px rgba(0,0,0,0.5); 
    }

    .sidebar-header h1 {
        margin: 0 20px;
        font-size: 24px;
        font-weight: 700;
    }

    .theme-switcher {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 20px;
        color: var(--text-secondary-nav);
        font-size: 14px;
    }

    /* Toggle Switch (Interruptor de Tema) - Reutilizando classes do toggle switch original */
    .toggle-switch {
        position: relative;
        width: 45px;
        height: 22px;
    }
    .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }
    .slider {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        background: var(--border-color-nav);
        border-radius: 20px;
        cursor: pointer;
        transition: .3s;
    }
    .slider:before {
        content: "";
        width: 16px;
        height: 16px;
        background: white;
        border-radius: 50%;
        position: absolute;
        left: 3px;
        top: 3px;
        transition: .3s;
    }
    input:checked + .slider {
        background: var(--accent-blue-nav);
    }
    input:checked + .slider:before {
        transform: translateX(22px);
    }
    body.dark .slider:before {
        background: #1D2B3C; /* Bola do slider mais escura para contraste */
    }


    .sidebar-nav {
        list-style: none;
        padding: 0;
        margin: 10px 0;
    }

    .nav-item a {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 20px;
        color: var(--text-secondary-nav);
        text-decoration: none;
        font-size: 16px;
        font-weight: 500;
        transition: .2s;
    }

    .nav-item a:hover {
        background: var(--bg-card-hover);
        color: var(--text-primary-nav);
    }

    .nav-item.active-nav a {
        background: var(--bg-active-nav);
        color: var(--text-primary-nav);
        border-right: 4px solid var(--accent-blue-nav);
    }

    .separator {
        height: 1px;
        background: var(--border-color-nav);
        margin: 15px 20px;
    }

    /* Ajuste de SVG para Sidebar */
    .sidebar svg {
        width: 20px;
        height: 20px;
        fill: currentColor;
    }
    
    /* ------------------------------------------------ */
    /* LAYOUT PRINCIPAL (Conte√∫do) - CORRIGIDO PARA BARRA LATERAL */
    /* ------------------------------------------------ */
    .main-content {
        margin-left: 250px; /* Adiciona margem para a sidebar */
        flex-grow: 1; 
        overflow-y: auto;
        padding: 20px; 
    }

    .container {
        max-width: 1200px;
        margin: 0 auto; 
        padding: 0; 
    }
    
    /* REMOVIDO: body.dark-mode .nav-item:hover a */

    /* ---------------------- */
    /* ESTILOS DE CONTE√öDO (ORIGINAIS) */
    /* ---------------------- */
    
    .header {
        text-align: center;
        margin-bottom: 30px;
        color: var(--cinza-texto); /* Garante que o texto do header mude de cor no dark mode */
    }

    .nav-tabs-container {
        display: flex;
        justify-content: center;
    }

    .nav-tabs {
        display: inline-flex;
        background-color: var(--cinza-medio); 
        padding: 5px;
        border-radius: 10px;
        margin-bottom: 30px;
    }

    .nav-tab {
        padding: 10px 20px;
        color: var(--cinza-texto); 
        font-weight: 600;
        cursor: pointer;
        border-radius: 8px;
        display: flex;
        align-items: center;
        transition: background-color 0.2s, color 0.2s;
    }

    .nav-tab:hover {
        background-color: var(--cinza-medio);
    }
    
    .nav-tab[data-target="questoes"].active {
        background-color: var(--bg-sidebar); /* Cor do card/sidebar para contraste */
        color: var(--azul-principal);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }
    
    .nav-tab[data-target="simulados"].active {
        background-color: var(--bg-sidebar); 
        color: var(--azul-principal); 
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }
    
    .nav-tab span {
        margin-right: 5px; 
        font-size: 1.1em; 
        line-height: 1; 
    }

    .tab-content {
        display: none; 
    }

    .tab-content.active {
        display: block; 
    }
    
    .content-grid { display: flex; gap: 30px; }
    .filters-section {
        flex: 0 0 300px; 
        background-color: var(--bg-sidebar);
        padding: 25px; 
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        position: sticky;
        top: 20px; 
        align-self: flex-start;
    }
    
    .filters-title { font-size: 1.1em; font-weight: 600; color: var(--cinza-texto); margin-bottom: 20px; display: flex; align-items: center; }
    .filter-group { margin-bottom: 20px; }
    .filter-group label { display: block; margin-bottom: 5px; color: var(--cinza-texto); font-size: 0.9em; font-weight: 600; }
    .filter-group select { 
        width: 100%; 
        padding: 10px; 
        border: 1px solid var(--cinza-medio); 
        border-radius: 8px; 
        background-color: var(--cinza-claro); 
        appearance: none; 
        -webkit-appearance: none; 
        -moz-appearance: none; 
        font-size: 1em; 
        cursor: pointer; 
        color: var(--cinza-texto); /* Garante que o texto dentro do select mude de cor */
    }
    body.dark .filter-group select {
        background-color: var(--cinza-claro); /* Fundo mais escuro para inputs */
        border-color: var(--cinza-medio);
    }


    .apply-button {
        width: 100%;
        padding: 12px;
        background-color: var(--azul-principal);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 1.05em;
        font-weight: 600;
        margin-top: 25px; 
        cursor: pointer;
        transition: background-color 0.2s;
    }
    .apply-button:hover { background-color: #30586e; }
    body.dark .apply-button:hover { background-color: #6197D8; } /* Ajuste de hover no dark mode */


    .tip-card { margin-top: 30px; padding: 0; border-radius: 0; font-size: 0.9em; color: var(--cinza-texto); background-color: transparent; }
    .tip-card strong { display: block; margin-bottom: 5px; color: var(--azul-principal); font-size: 1em; font-weight: 600; }

    .confirm-actions { display: flex; justify-content: space-between; align-items: center; margin-top: 20px; padding-top: 15px; border-top: 1px solid var(--cinza-medio); }
    .confirm-button { padding: 12px 25px; background-color: var(--azul-principal); color: white; border: none; border-radius: 8px; font-size: 1.05em; font-weight: 600; cursor: pointer; flex-grow: 1; margin-right: 15px; transition: background-color 0.2s; }
    .action-button-group { display: flex; }
    
    .action-button { 
        padding: 10px 15px; 
        background-color: var(--cinza-claro); 
        color: var(--azul-principal); 
        border: none; 
        border-radius: 8px; 
        font-weight: 600; 
        cursor: pointer; 
        font-size: 0.9em; 
        transition: background-color 0.2s; 
        margin-left: 10px; 
    }
    
    .confirm-button:hover { background-color: #30586e; }
    body.dark .confirm-button:hover { background-color: #6197D8; }
    .action-button:hover { background-color: #c9d2d8; }
    body.dark .action-button {
        background-color: var(--cinza-medio);
        color: var(--azul-principal);
    }
    body.dark .action-button:hover { background-color: #556D88; }


    .question-card { margin-bottom: 30px; border-radius: 12px; overflow: hidden; }
    .question-section { flex: 1; }
    .question-header { 
        background-color: var(--azul-principal);
        color: white; 
        padding: 20px 25px; 
        border-radius: 12px 12px 0 0; 
        display: flex; 
        justify-content: space-between; 
        align-items: center; 
    }
    .question-body { 
        background-color: var(--bg-sidebar); 
        color: var(--cinza-texto);
        padding: 25px; 
        border-radius: 0 0 12px 12px; 
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); 
    }
    
    .question-body h2 { color: var(--cinza-texto); }
    .answer-option { 
        padding: 15px; 
        border: 2px solid var(--cinza-medio); 
        border-radius: 8px; 
        margin-bottom: 12px; 
        cursor: pointer; 
        transition: border-color 0.2s, background-color 0.2s; /* Adicionado transition para background-color */
    }
    .answer-option:hover { border-color: var(--azul-principal); } 
    
    /* Estilos para Resposta Selecionada, Correta e Incorreta */
    .answer-option.selected {
        border-color: var(--azul-principal);
        background-color: rgba(58, 109, 137, 0.1); /* Azul claro sutil */
    }
    body.dark .answer-option.selected {
        background-color: rgba(116, 167, 224, 0.1); /* Azul claro sutil no dark mode */
    }
    
    .answer-option.correct {
        background-color: rgba(76, 180, 82, 0.2); /* Verde claro */
        border-color: var(--verde-progresso);
        font-weight: 600;
        pointer-events: none !important; /* Desabilita clique ap√≥s resposta */
    }
    
    .answer-option.incorrect {
        background-color: rgba(220, 20, 60, 0.2); /* Vermelho claro */
        border-color: crimson;
        font-weight: 600;
        pointer-events: none !important; /* Desabilita clique ap√≥s resposta */
    }

    /* Otimiza√ß√£o visual para o estado final de corre√ß√£o no dark mode */
    body.dark .answer-option.correct {
        background-color: rgba(129, 199, 132, 0.2);
    }
    body.dark .answer-option.incorrect {
        background-color: rgba(255, 99, 71, 0.2);
    }
    
    
    .simulados-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 25px; }
    
    .simulado-card { 
        background-color: var(--bg-sidebar); 
        padding: 25px; 
        border-radius: 12px; 
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); 
        display: flex; 
        flex-direction: column; 
        border: 2px solid transparent; 
        box-sizing: border-box; 
    }
    .simulado-card h3 { color: var(--cinza-texto); }
    .simulado-card.active-card { border-color: var(--verde-progresso); } 
    
    .card-header { 
        display: flex; 
        justify-content: space-between; 
        align-items: flex-start; 
        margin-bottom: 15px; 
    }
    
    .card-icon { 
        font-size: 1.5em; 
        width: 40px; 
        height: 40px; 
        border-radius: 8px; 
        display: flex; 
        align-items: center; 
        justify-content: center; 
        color: white; 
        margin-right: 15px; 
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); 
        position: relative; 
        top: -10px; 
        left: -10px;
        font-weight: bold;
    }
    
    /* Ajuste para o novo SVG dentro do card-icon */
    .card-icon svg {
        width: 24px;
        height: 24px;
        fill: currentColor;
    }

    .card-xp { text-align: right; color: var(--cinza-texto); }
    .xp-value { font-weight: 700; font-size: 1.1em; }
    .xp-level { font-size: 0.8em; color: var(--cinza-texto); }
    
    .card-details { 
        display: flex; 
        justify-content: space-between; 
        font-size: 0.9em; 
        color: var(--cinza-texto); 
        margin-bottom: 20px; 
        align-items: center;
        padding-top: 5px; 
        border-top: 1px solid var(--cinza-claro);
    }
    body.dark .card-details {
        border-top: 1px solid var(--cinza-medio); /* Borda mais clara no dark mode */
    }

    .card-details span { display: flex; align-items: center; }
    /* Ajuste para usar √≠cones de tempo e quest√µes no lugar de emojis */
    .card-details span:nth-child(1)::before, 
    .card-details span:nth-child(2)::before { 
        content: none; 
    } 
    /* Podemos usar SVGs ou um √≠cone de fonte para esses, mas manterei o layout sem emoji */
    .card-details span:nth-child(1)::before { content: 'üïí'; margin-right: 5px; }
    .card-details span:nth-child(2)::before { content: 'üìù'; margin-right: 5px; }

    
    .progress-bar { height: 8px; background-color: var(--cinza-medio); border-radius: 4px; margin-bottom: 10px; }
    .progress-bar-fill { height: 100%; background-color: var(--verde-progresso); border-radius: 4px; }
    .progress-label { font-size: 0.85em; color: var(--cinza-texto); margin-bottom: 15px; }
    
    .card-button { 
        padding: 12px; 
        border-radius: 8px; 
        text-align: center; 
        font-weight: 600; 
        font-size: 1.05em; 
        text-decoration: none; 
        margin-top: auto; 
        transition: background-color 0.2s; 
        cursor: pointer; 
        display: flex; 
        justify-content: center;
        align-items: center;
    }
    
    /* ========================================================================= */
    /* ESTILO REVERTIDO: Voltando √† cor original (--azul-principal) */
    /* ========================================================================= */
    .btn-primary { 
        background-color: var(--azul-principal); 
        color: white; 
        border: none; 
    } 
    .btn-primary:hover { 
        background-color: #30586e; 
    }
    body.dark .btn-primary {
        background-color: var(--azul-principal);
    }
    body.dark .btn-primary:hover { 
        background-color: #6197D8; 
    }

    /* Estilos SECUNDARY e LOCKED originais (usados no HTML, que agora usa apenas .btn-primary) */
    .btn-secondary { 
        background-color: var(--cinza-claro); 
        color: var(--azul-principal); 
        border: 1px solid var(--azul-principal); 
    } 
    .btn-secondary:hover { 
        background-color: #c9d2d8; 
    }

    .btn-locked { 
        background-color: var(--cinza-medio); 
        color: var(--cinza-texto); 
        border: none; 
        cursor: not-allowed; 
    }
    
    /* Como todos os cards agora usam 'btn-primary', os estilos acima servir√£o como fallback */
    
    .btn-success {
        background-color: var(--verde-progresso);
        color: white;
        border: none;
    }
    .btn-success:hover { background-color: #3b9040; }

    /* CORES DOS √çCONES DOS CARDS (MANTIDAS POR POSI√á√ÉO) */
    .simulado-card:nth-child(1) .card-icon { background-color: #3776ab; color: white; } 
    .simulado-card:nth-child(2) .card-icon { background-color: var(--verde-progresso); color: white; } 
    .simulado-card:nth-child(3) .card-icon { background-color: #FFD700; color: #444; } 
    .simulado-card:nth-child(4) .card-icon { background-color: #F8A771; color: white; } 
    .simulado-card:nth-child(5) .card-icon { background-color: #9370DB; color: white; } 
    .simulado-card:nth-child(6) .card-icon { background-color: #c9519c; color: white; } 
    .simulado-card:nth-child(7) .card-icon { background-color: #FF69B4; color: white; } 
    
    /* Cores dos √≠cones no Dark Mode (ajustado para melhor contraste) */
    body.dark .simulado-card:nth-child(3) .card-icon { background-color: #FFD700; color: #1D2B3C; } 

    /* Ajuste para mover PERFIL e CONFIGURA√á√ïES um pouco para cima */
.sidebar > div:last-child {
    margin-bottom: 30px; /* voc√™ pode aumentar ou diminuir */
}

/* --- RESPONSIVE SIDEBAR FIX --- */
@media (max-width: 768px) {
    .sidebar {
        position: fixed;
        left: -250px;
        top: 0;
        height: 100vh;
        transition: left .3s ease;
        z-index: 2000;
    }
    .sidebar.active {
        left: 0;
    }
    .hamburger {
        position: fixed;
        top: 15px;
        left: 15px;
        z-index: 2500;
        width: 35px;
        height: 28px;
        background: var(--azul-principal);
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 22px;
    }
    .main-content {
        margin-left: 0 !important;
        padding-top: 60px;
    }
}

</style>
</head>
<body>
<div class='hamburger' id='hamburguer-btn'>‚ò∞</div>

    <svg width="0" height="0" style="position:absolute;">
        <symbol id="i-home" viewBox="0 0 24 24"><path fill="currentColor" d="M12 5.69l5.66 5.66L18.71 11.29 12 4.59 5.29 11.29l1.05 1.06L12 5.69zM12 3L2 12h3v8h6v-6h2v6h6v-8h3L12 3z"/></symbol>
        <symbol id="i-flashcards" viewBox="0 0 24 24"><path fill="currentColor" d="M21 3h-6.38a2 2 0 00-3.24 0H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 16H4V6h2c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2h2v13z"/></symbol>
        <symbol id="i-questions" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14h2v2h-2v-2zm2.07-7.75l-.9.92C13.4 11.84 12 12.73 12 15H10v-.5c0-1.1.45-2.12 1.17-2.83l1.11-1.12c.57-.58.82-1.29.82-2.1V7c0-.55-.45-1-1-1H9V4h4c1.65 0 3 1.35 3 3v.75z"/></symbol>
        <symbol id="i-simulados" viewBox="0 0 24 24"><path fill="currentColor" d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm-1 7V3.5L18.5 9H13zM9 18l-4-4 1.41-1.41L9 15.17l7.59-7.59L18 9l-9 9z"/></symbol>
        <symbol id="i-games" viewBox="0 0 24 24"><path fill="currentColor" d="M16.5 9c-.28 0-.5.22-.5.5s.22.5.5.5h2c.28 0 .5-.22.5-.5s-.22-.5-.5-.5h-2zm-3.5 0c-.28 0-.5.22-.5.5s.22.5.5.5h2c.28 0 .5-.22.5-.5s-.22-.5-.5-.5h-2zM7.5 9c-.28 0-.5.22-.5.5s.22.5.5.5h2c.28 0 .5-.22.5-.5s-.22-.5-.5-.5h-2zm-3.5 0c-.28 0-.5.22-.5.5s.22.5.5.5h2c.28 0 .5-.22.5-.5s-.22-.5-.5-.5H4zm8 5c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zm0 4c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zM20 5H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zM4 17h16V7H4v10z"/></symbol>
        <symbol id="i-desempenho" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15H9v-6h2v6zm4 0h-2V7h2v10z"/></symbol>
        <symbol id="i-ranking" viewBox="0 0 24 24"><path fill="currentColor" d="M12 11.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zM20 2H4c-1.1 0-2 .9-2 2v18l2-2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-4 12c-1.65 0-3-.4-4-1.1C11 14.5 9.65 15 8 15c-1.65 0-3-.4-4-1.1v-2.1c1-.7 2.35-1.1 4-1.1s3 .4 4 1.1c1-.7 2.35-1.1 4-1.1s3 .4 4 1.1v2.1c-1 .7-2.35 1.1-4 1.1z"/></symbol>
        <symbol id="i-calendario" viewBox="0 0 24 24"><path fill="currentColor" d="M19 4h-2V2h-2v2H9V2H7v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11zM7 11h2v2H7zM7 15h2v2H7zM11 11h2v2h-2zM11 15h2v2h-2zM15 11h2v2h-2zM15 15h2v2h-2z"/></symbol>
        <symbol id="i-perfil" viewBox="0 0 24 24"><path fill="currentColor" d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></symbol>
        <symbol id="i-config" viewBox="0 0 24 24"><path fill="currentColor" d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.39-1.09-.73-1.71-.99l-.37-2.65c-.06-.27-.3-.46-.57-.46h-4c-.27 0-.51.19-.57.46l-.37 2.65c-.62.26-1.19.6-1.71.99l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.12.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.39 1.09.73 1.71.99l.37 2.65c.06.27.3.46.57.46h4c.27 0 .51-.19.57-.46l.37-2.65c.62-.26 1.19-.6 1.71-.99l2.49 1c.22.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"/></symbol>

        <symbol id="sc-document" viewBox="0 0 24 24"><path fill="currentColor" d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm-1 7V3.5L18.5 9H13zM6 19c0 .55.45 1 1 1h10c.55 0 1-.45 1-1V11H6v8z"/></symbol>
        <symbol id="sc-calculator" viewBox="0 0 24 24"><path fill="currentColor" d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 16H6V5h12v14zM8 7h2v2H8zm4 0h2v2h-2zm-4 4h2v2H8zm4 0h2v2h-2zm-4 4h2v2H8zm4 0h2v2h-2z"/></symbol>
        <symbol id="sc-book" viewBox="0 0 24 24"><path fill="currentColor" d="M21 5c-1.11-.35-2.36-.5-3.5-.5-1.42 0-3.13.43-3.9 1.1L12 6.5l-1.6-1.1c-.77-.67-2.48-1.1-3.9-1.1-1.14 0-2.39.15-3.5.5V19c0 .55.45 1 1 1h14c.55 0 1-.45 1-1V5z"/></symbol>
        <symbol id="sc-flask" viewBox="0 0 24 24"><path fill="currentColor" d="M18.92 7.01C18.25 4.88 16.2 3.32 13.73 3.06c-.49-.05-.98-.06-1.48-.06s-.99.01-1.48.06C7.8 3.32 5.75 4.88 5.08 7.01l-2.07 6.46C2.65 14.52 3 15.34 3 16c0 3.31 2.69 6 6 6s6-2.69 6-6c0-.66.35-1.48.07-2.53l-2.07-6.46zM12 20c-2.21 0-4-1.79-4-4 0-.17.07-.34.13-.5l1.65-5.18h4.44l1.65 5.18c.06.16.13.33.13.5 0 2.21-1.79 4-4 4zM10.5 12h3v-1h-3v1zM9.5 9h5V8h-5v1z"/></symbol>
        <symbol id="sc-globe" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM14.9 10.96l-.98-1.5c-.24-.36-.63-.56-1.07-.56-.44 0-.83.2-1.07.56l-.98 1.5c-.25.38-.26.86-.01 1.25.13.21.36.33.61.33h3c.25 0 .48-.12.61-.33.25-.39.24-.87 0-1.25zm-.15-2.05L12 5.5l-2.75 4.41c.64-.17 1.32-.26 2.02-.26s1.38.09 2.02.26zm-4.75 5.09l.98 1.5c.24.36.63.56 1.07.56s.83-.2 1.07-.56l.98-1.5c.25-.38.26-.86.01-1.25-.13-.21-.36-.33-.61-.33h-3c-.25 0-.48.12-.61.33-.25.39-.24.87 0 1.25zM12 18.5c-.64.17-1.32.26-2.02.26s-1.38-.09-2.02-.26l2.75-4.41 2.75 4.41z"/></symbol>
        <symbol id="sc-pen" viewBox="0 0 24 24"><path fill="currentColor" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></symbol>
    </svg>

    <aside class="sidebar">

        <div>
            <div class="sidebar-header">
                <h1>Painel</h1>
                <div class="separator"></div>
            </div>

            <div class="theme-switcher">
                <span>Tema</span>
                <label class="toggle-switch">
                    <input type="checkbox" id="theme-toggle">
                    <span class="slider"></span>
                </label>
            </div>

            <ul class="sidebar-nav">
                <li class="nav-item active-nav"><a href="#"><svg><use href="#i-home"></use></svg> In√≠cio</a></li>
                <li class="nav-item"><a href="#"><svg><use href="#i-flashcards"></use></svg> Flashcards</a></li>
                <li class="nav-item"><a href="#" data-nav-target="questoes-tab"><svg><use href="#i-questions"></use></svg> Quest√µes</a></li>
                <li class="nav-item"><a href="#" data-nav-target="simulados-tab"><svg><use href="#i-simulados"></use></svg> Simulados</a></li>
                <li class="nav-item"><a href="#"><svg><use href="#i-games"></use></svg> Jogos</a></li>
                <li class="nav-item"><a href="#"><svg><use href="#i-desempenho"></use></svg> Desempenho</a></li>
                <li class="nav-item"><a href="#"><svg><use href="#i-ranking"></use></svg> Ranking</a></li>
                <li class="nav-item"><a href="#"><svg><use href="#i-calendario"></use></svg> Calend√°rio</a></li>
            </ul>
        </div>

        <div>
            <div class="separator"></div>

            <ul class="sidebar-nav">
                <li class="nav-item"><a href="#"><svg><use href="#i-perfil"></use></svg> Perfil</a></li>
                <li class="nav-item"><a href="#"><svg><use href="#i-config"></use></svg> Configura√ß√µes</a></li>
            </ul>
        </div>

    </aside>

    <main class="main-content">
        <div class="container">
            
            <header class="header">
                <div class="nav-tabs-container">
                    <div class="nav-tabs">
                        <div class="nav-tab active" data-target="questoes">
                            <span></span> Quest√µes
                        </div>
                        <div class="nav-tab" data-target="simulados">
                            <span></span> Simulados
                        </div>
                    </div>
                </div>
                <h1 id="main-title">Banco de Quest√µes</h1>
                <p id="main-subtitle">Pratique com milhares de quest√µes do ENEM com explica√ß√µes detalhadas</p>
            </header>

            <div id="content-questoes" class="tab-content active">

                <div class="content-grid">
                    
                    <aside class="filters-section">
                        <div class="filters-title">‚ñΩ Filtros</div>
                        
                        <div class="filter-group">
                            <label for="materia">Mat√©ria</label>
                            <select id="materia">
                                <option>Todas</option>
                                <option>Matem√°tica</option>
                                <option>Linguagens</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label for="topicos">T√≥picos</label>
                            <select id="topicos">
                                <option>Todos</option>
                                <option>Geometria Espacial</option>
                                <option>Regra de Tr√™s</option>
                                <option>Estat√≠stica</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="dificuldade">Dificuldade</label>
                            <select id="dificuldade">
                                <option>Todas</option>
                                <option>F√°cil</option>
                                <option>M√©dio</option>
                                <option>Dif√≠cil</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="quantidade-questoes">Quest√µes por P√°gina</label>
                            <select id="quantidade-questoes">
                                <option value="1">1 Quest√£o (Modo Estudo)</option>
                                <option value="5" selected>5 Quest√µes (Modo Lista)</option>
                                <option value="10">10 Quest√µes (Modo Revis√£o)</option>
                            </select>
                        </div>
                        <button class="apply-button">Aplicar Filtros</button>
                        
                        <div class="tip-card">
                            <strong>Dica do Dia</strong>
                            Pratique quest√µes de diferentes t√≥picos para se familiarizar com os padr√µes do ENEM.
                        </div>
                    </aside>

                    <main class="question-section">
                        </main>
                </div>
                
            </div>
            
            <div id="content-simulados" class="tab-content">
                
                <section class="simulados-grid">
                
                    <div class="simulado-card">
                        <div class="card-header">
                            <span class="card-icon"><svg width="24" height="24"><use href="#sc-document"></use></svg></span> 
                            <div class="card-xp"><div class="xp-value">+250 XP</div><div class="xp-level">Oficial</div></div>
                        </div>
                        <div class="card-content">
                            <h3>Simulado ENEM - Dia 1</h3>
                            <p>Linguagens (45), Humanas (45) e Reda√ß√£o</p>
                            <div class="card-details"><span>üïí 5h 30m</span><span>90 quest√µes + Reda√ß√£o</span></div>
                            <a href="#" class="card-button btn-primary">‚ñ∑ Iniciar</a>
                        </div>
                    </div>
                    
                    <div class="simulado-card">
                        <div class="card-header">
                            <span class="card-icon"><svg width="24" height="24"><use href="#sc-calculator"></use></svg></span>
                            <div class="card-xp"><div class="xp-value">+250 XP</div><div class="xp-level">Oficial</div></div>
                        </div>
                        <div class="card-content">
                            <h3>Simulado ENEM - Dia 2</h3>
                            <p>Matem√°tica (45) e Ci√™ncias da Natureza (45)</p>
                            <div class="card-details"><span>üïí 5h 00m</span><span>90 quest√µes</span></div>
                            <a href="#" class="card-button btn-primary">‚ñ∑ Iniciar</a>
                        </div>
                    </div>

                    <div class="simulado-card">
                        <div class="card-header">
                            <span class="card-icon"><svg width="24" height="24"><use href="#sc-calculator"></use></svg></span>
                            <div class="card-xp"><div class="xp-value">+150 XP</div><div class="xp-level">Dif√≠cil</div></div>
                        </div>
                        <div class="card-content">
                            <h3>Matem√°tica Intensiva</h3>
                            <p>45 quest√µes focadas em matem√°tica e suas tecnologias</p>
                            <div class="card-details"><span>üïí 1h 30m</span><span>45 quest√µes</span></div>
                            <a href="#" class="card-button btn-primary">‚ñ∑ Iniciar</a>
                        </div>
                    </div>
                    
                    <div class="simulado-card active-card">
                        <div class="card-header">
                            <span class="card-icon"><svg width="24" height="24"><use href="#sc-book"></use></svg></span>
                            <div class="card-xp"><div class="xp-value">+100 XP</div><div class="xp-level">M√©dio</div></div>
                        </div>
                        <div class="card-content">
                            <h3>Linguagens Express</h3>
                            <p>Revis√£o r√°pida com 30 quest√µes de linguagens</p>
                            <div class="card-details"><span>üïí 45m</span><span>30 quest√µes</span></div>
                            
                            <a href="#" class="card-button btn-primary">‚ñ∑ Iniciar</a>
                        </div>
                    </div>
                    
                    <div class="simulado-card">
                        <div class="card-header">
                            <span class="card-icon"><svg width="24" height="24"><use href="#sc-flask"></use></svg></span>
                            <div class="card-xp"><div class="xp-value">+150 XP</div><div class="xp-level">Dif√≠cil</div></div>
                        </div>
                        <div class="card-content">
                            <h3>Ci√™ncias da Natureza</h3>
                            <p>F√≠sica, Qu√≠mica e Biologia em 45 quest√µes desafiadoras</p>
                            <div class="card-details"><span>üïí 1h 30m</span><span>45 quest√µes</span></div>
                            <a href="#" class="card-button btn-primary">‚ñ∑ Iniciar</a>
                        </div>
                    </div>
                    
                    <div class="simulado-card">
                        <div class="card-header">
                            <span class="card-icon"><svg width="24" height="24"><use href="#sc-globe"></use></svg></span>
                            <div class="card-xp"><div class="xp-value">+120 XP</div><div class="xp-level">M√©dio</div></div>
                        </div>
                        <div class="card-content">
                            <h3>Ci√™ncias Humanas</h3>
                            <p>Hist√≥ria, Geografia, Filosofia e Sociologia</p>
                            <div class="card-details"><span>üïí 1h 30m</span><span>45 quest√µes</span></div>
                            <a href="#" class="card-button btn-primary">‚ñ∑ Iniciar</a>
                        </div>
                    </div>
                    
                    <div class="simulado-card">
                        <div class="card-header">
                            <span class="card-icon"><svg width="24" height="24"><use href="#sc-pen"></use></svg></span>
                            <div class="card-xp"><div class="xp-value">+200 XP</div><div class="xp-level">Especial</div></div>
                        </div>
                        <div class="card-content">
                            <h3>Reda√ß√£o Tem√°tica
                            </h3>
                            <p>Pr√°tica de reda√ß√£o com temas atuais e relevantes</p>
                            <div class="card-details"><span>üïí 1h 30m</span><span>1 quest√µes</span></div>
                            <a href="#" class="card-button btn-primary">‚ñ∑ Iniciar</a>
                        </div>
                    </div>
                
                </section>
            </div>
            
        </div>
    </main>

  <script type="module">
        // Importa as fun√ß√µes do Firebase App, Cloud Firestore e Autentica√ß√£o
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getFirestore, collection, getDocs, limit, query } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";


        // Sua configura√ß√£o do Firebase (MANTIDA)
        const firebaseConfig = {
            apiKey: "AIzaSyCj8i37JYNigvbhXfqP4HVzjAEOzcXf_i0",
            authDomain: "sdel-b3f65.firebaseapp.com",
            databaseURL: "https://sdel-b3f65-default-rtdb.firebaseio.com",
            projectId: "sdel-b3f65",
            storageBucket: "sdel-b3f65.firebasestorage.app",
            messagingSenderId: "297725999985",
            appId: "1:297725999985:web:d41da68311c190ef8a54d0",
            measurementId: "G-PT92VECJ2H"
        };

        // 1. Inicializa o Firebase, Firestore e Auth
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app); // Inicializa a autentica√ß√£o
        

        // 2. Fun√ß√£o para Autenticar e Iniciar a Busca
        async function authenticateAndFetch() {
            try {
                // Tenta logar o usu√°rio anonimamente para satisfazer a regra 'if request.auth != null'
                await signInAnonymously(auth);
                console.log("Usu√°rio autenticado anonimamente com sucesso.");
                
                // Se a autentica√ß√£o for bem-sucedida, inicia a busca de quest√µes
                fetchAndRenderQuestions();
            } catch (error) {
                const questionSection = document.querySelector('.question-section');
                console.error("Erro na autentica√ß√£o Firebase:", error);
                
                let errorMessage = 'N√£o foi poss√≠vel autenticar. Verifique se o login an√¥nimo est√° habilitado no seu console Firebase (Authentication -> Sign-in method).';
                
                if (questionSection) {
                    questionSection.innerHTML = `<p style="text-align: center; color: red; padding: 20px;">‚ùå ERRO DE AUTENTICA√á√ÉO: ${errorMessage}</p>`;
                }
            }
        }

        // 3. Fun√ß√£o para Renderizar as Quest√µes buscando do Firestore (sem altera√ß√£o na l√≥gica)
        async function fetchAndRenderQuestions() {
            const questionSection = document.querySelector('.question-section');
            if (!questionSection) return;

            questionSection.innerHTML = '';
            
            // Query para buscar as primeiras 5 quest√µes da cole√ß√£o 'questoes'
            const q = query(collection(db, "questoes"), limit(5)); 

            try {
                const querySnapshot = await getDocs(q);
                let questionCounter = 1;
                const totalQuestions = querySnapshot.size;

                if (totalQuestions === 0) {
                     questionSection.innerHTML = '<p style="text-align: center; color: var(--cinza-texto);">Nenhuma quest√£o encontrada no banco de dados.</p>';
                     return;
                }

                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    
                    if (!data.alternativas || typeof data.alternativas !== 'object') {
                        console.warn("Documento sem alternativas v√°lidas, pulando:", doc.id);
                        return; 
                    }

                    // Mapeia as alternativas (keys s√£o 0, 1, 2, 3, 4, etc.) para letras (A, B, C, D, E)
                    const optionsHtml = Object.keys(data.alternativas).sort().map(key => {
                        const letterCode = 65 + parseInt(key); 
                        const letter = String.fromCharCode(letterCode); 
                        const text = data.alternativas[key];
                        
                        return `
                            <div class="answer-option" data-option="${letter}">
                                <span class="answer-letter">${letter})</span> ${text}
                            </div>
                        `;
                    }).join('');
                    
                    // Formata√ß√£o do tempo (assumindo que o campo 'tempo' √© em segundos)
                    const minutes = Math.floor((data.tempo || 0) / 60);
                    const seconds = ((data.tempo || 0) % 60).toString().padStart(2, '0');
                    const formattedTime = `${minutes}:${seconds}`;

                    // Cria o HTML da quest√£o com os dados do Firestore
                    const questionCardHtml = `
                        <div class="question-card" data-question-id="${doc.id}" data-correct-answer="${data.correta || ''}">
                            <div class="question-header">
                                <div class="question-tags">
                                    <span>${data.materia || 'N/A'}</span>
                                    <span>${data.topico || 'N/A'}</span>
                                    <span>${data.dificuldade || 'N/A'}</span>
                                </div>
                                <div class="question-info">
                                    <div class="time">üïí ${formattedTime}</div>
                                    <div class="level">N√≠vel ${data.dificuldade || 'N/A'}</div>
                                </div>
                            </div>

                            <div class="question-body">
                                <h2>Quest√£o ${questionCounter} de ${totalQuestions}</h2>
                                <p>${data.enunciado || 'Enunciado n√£o dispon√≠vel.'}</p>

                                <div class="options">
                                    ${optionsHtml}
                                </div>

                                <div class="confirm-actions">
                                    <button class="confirm-button" disabled>Confirmar Resposta</button>
                                    <div class="action-button-group">
                                        <button class="action-button">Favoritar</button>
                                        <button class="action-button">Coment√°rios</button>
                                    </div>
                                </div>
                                <div class="feedback-message" style="margin-top: 15px; font-size: 0.9em; display: none;"></div>
                            </div>
                        </div>
                    `;

                    questionSection.insertAdjacentHTML('beforeend', questionCardHtml);
                    questionCounter++;
                });
                
                // Adiciona L√≥gica de Sele√ß√£o e Confirma√ß√£o ap√≥s a renderiza√ß√£o
                addQuestionInteractionListeners();
                
            } catch (error) {
                console.error("Erro ao buscar quest√µes:", error);
                questionSection.innerHTML = '<p style="text-align: center; color: red;">N√£o foi poss√≠vel carregar as quest√µes. Verifique a conex√£o com o Firebase e as regras de seguran√ßa.</p>';
            }
        }

        // 4. L√≥gica de Intera√ß√£o da Quest√£o (MANTIDA)
        function addQuestionInteractionListeners() {
            document.querySelectorAll('.question-card').forEach(card => {
                const options = card.querySelectorAll('.answer-option');
                const confirmButton = card.querySelector('.confirm-button');
                const feedbackMessage = card.querySelector('.feedback-message');
                let selectedOption = null;

                // L√≥gica de Sele√ß√£o
                options.forEach(option => {
                    option.addEventListener('click', () => {
                        // Deseleciona a op√ß√£o anterior
                        if (selectedOption) {
                            selectedOption.classList.remove('selected');
                        }
                        
                        // Seleciona a nova op√ß√£o
                        selectedOption = option;
                        selectedOption.classList.add('selected');
                        confirmButton.disabled = false; // Habilita o bot√£o
                    });
                });

                // L√≥gica de Confirma√ß√£o
                confirmButton.addEventListener('click', () => {
                    if (!selectedOption || confirmButton.disabled) return;

                    const correctAnswer = card.getAttribute('data-correct-answer');
                    const selectedAnswer = selectedOption.getAttribute('data-option');
                    
                    // Desativa o bot√£o de confirma√ß√£o ap√≥s a resposta
                    confirmButton.disabled = true;
                    
                    // Verifica a resposta
                    if (selectedAnswer === correctAnswer) {
                        selectedOption.classList.add('correct');
                        feedbackMessage.textContent = '‚úÖ Resposta Correta! Parab√©ns!';
                        feedbackMessage.style.color = 'var(--verde-progresso)';
                    } else {
                        selectedOption.classList.add('incorrect');
                        
                        // Marca a resposta correta para feedback visual (se existir)
                        const correctElement = card.querySelector(`.answer-option[data-option="${correctAnswer}"]`);
                        if (correctElement) {
                            correctElement.classList.add('correct');
                        }
                        
                        feedbackMessage.textContent = `‚ùå Resposta Incorreta. A resposta certa era a letra ${correctAnswer}.`;
                        feedbackMessage.style.color = 'crimson';
                    }
                    
                    feedbackMessage.style.display = 'block';
                    
                    // Desativa a sele√ß√£o de outras op√ß√µes ap√≥s a resposta
                    options.forEach(opt => opt.style.pointerEvents = 'none');
                });
            });
        }


        document.addEventListener('DOMContentLoaded', () => {
            
            // Chama a fun√ß√£o de autentica√ß√£o, que por sua vez chama a busca de quest√µes
            authenticateAndFetch(); 
            
// --- MOBILE SIDEBAR TOGGLE ---
const btn = document.getElementById("hamburguer-btn");
const sidebar = document.querySelector(".sidebar");
if (btn){
    btn.addEventListener("click", ()=> sidebar.classList.toggle("active"));
}


const tabs = document.querySelectorAll('.nav-tab');
            const mainTitle = document.getElementById('main-title');
            const mainSubtitle = document.getElementById('main-subtitle');
            const body = document.body; 
            
            // Novos elementos do Sidebar
            const themeToggle = document.getElementById('theme-toggle');
            const navItems = document.querySelectorAll('.sidebar-nav .nav-item a');
            const questaoTabInHeader = document.querySelector('.nav-tab[data-target="questoes"]');
            const simuladosTabInHeader = document.querySelector('.nav-tab[data-target="simulados"]');

            const titles = {
                'questoes': {
                    title: 'Banco de Quest√µes',
                    subtitle: 'Pratique com milhares de quest√µes do ENEM com explica√ß√µes detalhadas'
                },
                'simulados': {
                    title: 'Banco de Simulados',
                    subtitle: 'Selecione um simulado para iniciar a sua pr√°tica'
                }
            };

            const switchTab = (targetTab) => {
                // 1. Remove a classe 'active' de todas as abas e conte√∫dos
                tabs.forEach(tab => tab.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                
                // 2. Remove 'active-nav' do sidebar e adiciona 'active-nav' no item correspondente
                document.querySelectorAll('.sidebar-nav .nav-item').forEach(item => item.classList.remove('active-nav'));
                
                // 3. Adiciona a classe 'active' √† aba clicada (header)
                const activeTab = document.querySelector(`.nav-tab[data-target="${targetTab}"]`);
                if (activeTab) {
                    activeTab.classList.add('active');
                }
                
                // 4. Adiciona 'active-nav' no item correspondente do sidebar
                let sidebarItem = document.querySelector(`.sidebar-nav a[data-nav-target="${targetTab}-tab"]`);
                // Adiciona 'active-nav' ao item 'In√≠cio' se n√£o houver um target espec√≠fico para o sidebar (Ex: In√≠cio)
                if (targetTab === 'questoes' || targetTab === 'simulados') {
                    if (sidebarItem) {
                        sidebarItem.closest('.nav-item').classList.add('active-nav');
                    }
                } else {
                    // Mant√©m 'In√≠cio' ativo por padr√£o se n√£o for 'quest√µes' ou 'simulados'
                    document.querySelector('.sidebar-nav .nav-item:first-child').classList.add('active-nav');
                }
                

                // 5. Adiciona a classe 'active' ao conte√∫do alvo
                const activeContent = document.getElementById(`content-${targetTab}`);
                if (activeContent) {
                    activeContent.classList.add('active');
                }

                // 6. Atualiza o t√≠tulo e subt√≠tulo
                if (mainTitle && mainSubtitle && titles[targetTab]) {
                    mainTitle.textContent = titles[targetTab].title;
                    mainSubtitle.textContent = titles[targetTab].subtitle;
                }
            };

            // L√≥gica de tema (AJUSTADO para o novo sidebar e classe 'dark')
            function toggleThemeVisual() {
                const isDarkMode = body.classList.toggle('dark');
                // Salva a prefer√™ncia do usu√°rio no localStorage
                localStorage.setItem('tema', isDarkMode ? 'dark' : 'light');
            }

            if (themeToggle) {
                 themeToggle.addEventListener('change', toggleThemeVisual);
            }
            
            // Verifica o tema salvo ao carregar a p√°gina
            const savedTheme = localStorage.getItem('tema');
            if (savedTheme === 'dark') {
                body.classList.add('dark');
                if (themeToggle) { themeToggle.checked = true; }
            }
            
            // Adiciona o evento de clique a cada aba no header
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const target = tab.getAttribute('data-target');
                    if (target) {
                        switchTab(target);
                    }
                });
            });

            // Adiciona o evento de clique aos itens 'Quest√µes' e 'Simulados' do sidebar
            navItems.forEach(item => {
                const target = item.getAttribute('data-nav-target');
                if (target === 'questoes-tab') {
                     item.addEventListener('click', (e) => {
                        e.preventDefault();
                        switchTab('questoes');
                    });
                } else if (target === 'simulados-tab') {
                    item.addEventListener('click', (e) => {
                        e.preventDefault();
                        switchTab('simulados');
                    });
                } else if (!target) {
                    // Para os outros itens (In√≠cio, Flashcards, etc.), apenas remove 'active-nav'
                    // dos itens 'Quest√µes'/'Simulados' e mant√©m/adiciona ao clicado (ex: In√≠cio)
                    item.addEventListener('click', () => {
                        document.querySelectorAll('.sidebar-nav .nav-item').forEach(li => li.classList.remove('active-nav'));
                        item.closest('.nav-item').classList.add('active-nav');
                        // No c√≥digo real, esta navega√ß√£o levaria a outras p√°ginas
                        // Para este caso, apenas garanto que o layout "Banco de Quest√µes" / "Banco de Simulados" est√° escondido/inativo se for clicado em um item que n√£o √© um tab-content.
                        if (item.closest('.nav-item').classList.contains('active-nav') && item.closest('.nav-item').classList.contains('active-nav')) {
                             tabs.forEach(tab => tab.classList.remove('active'));
                             document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                             mainTitle.textContent = "Painel Inicial";
                             mainSubtitle.textContent = "Seu centro de estudos e progresso";
                        }
                    });
                }
            });
            
            // Inicializa a p√°gina com a aba "Quest√µes" ativa (garantindo o estado inicial)
            if (questaoTabInHeader) {
                questaoTabInHeader.setAttribute('data-target', 'questoes');
            }
            if (simuladosTabInHeader) {
                simuladosTabInHeader.setAttribute('data-target', 'simulados');
            }
            switchTab('questoes'); 
        });
    </script>

</body>
</html>

